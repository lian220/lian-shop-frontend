# Lian Shop 프론트엔드 기능 정의서

## 1. 개요

Lian Shop은 Next.js 16 기반의 온라인 쇼핑몰 프론트엔드 애플리케이션입니다. 미니멀하고 현대적인 디자인을 채택하여 사용자 경험을 최적화했습니다.

## 2. 기술 스택

- **Framework**: Next.js 16.0.6
- **Language**: TypeScript
- **Styling**: Tailwind CSS 4
- **State Management**: React Hooks (useState, useEffect)
- **API Communication**: Fetch API
- **Storage**: localStorage (인증, 장바구니)

## 3. 주요 기능

### 3.1 인증 기능

#### 3.1.1 회원가입 (`/signup`)
- **기능**: 신규 사용자 회원가입
- **입력 항목**:
  - 이름 (필수)
  - 이메일 (필수, 이메일 형식 검증)
  - 비밀번호 (필수, 최소 6자)
  - 비밀번호 확인 (필수, 비밀번호 일치 검증)
- **검증**:
  - 비밀번호 일치 여부 확인
  - 비밀번호 최소 길이 검증
- **동작**: 회원가입 성공 시 자동 로그인 및 홈으로 이동

#### 3.1.2 로그인 (`/login`)
- **기능**: 기존 사용자 로그인
- **입력 항목**:
  - 이메일 (필수)
  - 비밀번호 (필수)
- **동작**: 로그인 성공 시 토큰 저장 및 홈으로 이동

#### 3.1.3 로그아웃
- **기능**: 현재 세션 종료
- **위치**: Header 사용자 메뉴
- **동작**: localStorage 토큰 제거 및 홈으로 이동

### 3.2 상품 기능

#### 3.2.1 상품 목록 (`/`)
- **기능**: 전체 상품 목록 조회
- **표시 정보**:
  - 상품 이미지
  - 상품명
  - 가격
  - 재고 상태 (품절 표시)
- **레이아웃**: 
  - 모바일: 2열 그리드
  - 데스크톱: 4열 그리드
- **최적화**: ISR (Incremental Static Regeneration) 60초 재검증

#### 3.2.2 상품 상세 (`/product/[id]`)
- **기능**: 개별 상품 상세 정보 조회
- **표시 정보**:
  - 상품 이미지 (큰 사이즈)
  - 상품명
  - 가격
  - 상품 설명
  - 재고 수량
  - 재고 상태 배지 (재고 있음/재고 부족/품절)
- **인터랙션**:
  - 수량 선택 (1 ~ 재고 수량)
  - 장바구니 추가
  - 바로 구매
- **레이아웃**: 2열 그리드 (이미지 | 정보)
- **스타일**: 미니멀 디자인, 대문자 텍스트, 넓은 자간

### 3.3 장바구니 기능

#### 3.3.1 장바구니 추가
- **위치**: 상품 상세 페이지
- **기능**: 선택한 수량만큼 상품을 장바구니에 추가
- **동작**:
  - 기존 상품이 있으면 수량 합산
  - 새 상품이면 추가
  - localStorage에 저장
  - Header 장바구니 아이콘에 개수 표시

#### 3.3.2 장바구니 관리
- **저장소**: localStorage
- **표시**: Header 장바구니 아이콘에 실시간 개수 표시
- **이벤트**: `cart-change` 커스텀 이벤트로 상태 동기화

### 3.4 관리자 기능

#### 3.4.1 관리자 페이지 (`/admin`)
- **접근 권한**: ADMIN 역할만 접근 가능
- **기능**:
  - 상품 관리 탭
  - 주문 관리 탭 (준비 중)
- **인증**: 비로그인 시 로그인 페이지로 리다이렉트

#### 3.4.2 상품 관리
- **상품 목록 조회**: 관리자용 API로 전체 상품 조회
- **상품 수정** (`/admin/products/[id]/edit`):
  - 상품명 수정
  - 상품 설명 수정
  - 가격 수정
  - 재고 수량 수정
  - 이미지 URL 수정
- **상품 추가** (`/admin/products/new`):
  - 새 상품 등록
  - 모든 필드 입력
- **상품 삭제**:
  - 상품 목록에서 삭제 버튼 클릭
  - 확인 없이 즉시 삭제

### 3.5 공통 컴포넌트

#### 3.5.1 Header
- **위치**: 모든 페이지 상단 (sticky)
- **기능**:
  - 로고 (홈 링크)
  - 네비게이션 메뉴
  - 검색 아이콘 (준비 중)
  - 장바구니 아이콘 (개수 표시)
  - 사용자 메뉴:
    - 로그인 전: 로그인/회원가입 버튼
    - 로그인 후: 사용자 이름, 관리자 메뉴 (ADMIN만), 로그아웃
- **상태 관리**: 
  - localStorage 기반 인증 상태
  - `auth-change` 이벤트 리스너
  - pathname 변경 시 상태 갱신

#### 3.5.2 ProductCard
- **기능**: 상품 카드 컴포넌트
- **표시**: 이미지, 상품명, 가격
- **인터랙션**: 클릭 시 상품 상세 페이지로 이동

#### 3.5.3 Footer
- **위치**: 모든 페이지 하단
- **내용**: 저작권 정보

## 4. API 통신

### 4.1 API URL 설정
- **환경 변수**: `NEXT_PUBLIC_API_URL`
- **기본값**: `http://localhost:8080`
- **자동 처리**: `/api` 경로 자동 추가

### 4.2 인증 API
- **로그인**: `POST /api/auth/login`
- **회원가입**: `POST /api/auth/signup`
- **인증 헤더**: `Authorization: Bearer {token}`

### 4.3 상품 API
- **상품 목록**: `GET /api/products`
- **상품 상세**: `GET /api/products/{id}`
- **관리자 상품 목록**: `GET /api/admin/products` (인증 필요)
- **상품 생성**: `POST /api/admin/products` (인증 필요)
- **상품 수정**: `PUT /api/admin/products/{id}` (인증 필요)
- **상품 삭제**: `DELETE /api/admin/products/{id}` (인증 필요)

## 5. 상태 관리

### 5.1 인증 상태
- **저장소**: localStorage
- **키**: `token`, `user`
- **동기화**: `auth-change` 커스텀 이벤트

### 5.2 장바구니 상태
- **저장소**: localStorage
- **키**: `cart`
- **형식**: `CartItem[]`
- **동기화**: `cart-change` 커스텀 이벤트

## 6. 스타일 가이드

### 6.1 디자인 원칙
- **미니멀**: 깔끔하고 간결한 디자인
- **대문자 텍스트**: UPPERCASE 스타일
- **넓은 자간**: `tracking-widest`
- **색상**: 흰색/검은색 기반, 포인트 컬러 사용

### 6.2 반응형 디자인
- **모바일**: 2열 그리드
- **태블릿**: 2-4열 그리드
- **데스크톱**: 4열 그리드

### 6.3 다크 모드
- **지원**: Tailwind CSS dark 모드
- **자동 전환**: 시스템 설정 따라감

## 7. 에러 처리

### 7.1 API 에러
- **네트워크 에러**: 콘솔 로그 및 사용자 메시지
- **인증 에러**: 로그인 페이지로 리다이렉트
- **권한 에러**: 홈으로 리다이렉트 및 알림

### 7.2 폼 검증
- **클라이언트 사이드**: 실시간 검증
- **에러 메시지**: 입력 필드 하단 표시

## 8. 성능 최적화

### 8.1 이미지 최적화
- **Next.js Image 컴포넌트**: 자동 최적화
- **Lazy Loading**: 우선순위 설정
- **포맷**: WebP, AVIF 지원

### 8.2 데이터 페칭
- **ISR**: 상품 목록 60초 재검증
- **캐싱**: 적절한 캐시 전략 적용
- **서버 사이드 렌더링**: 초기 로딩 최적화

## 9. 보안

### 9.1 인증
- **토큰 저장**: localStorage
- **토큰 전송**: Authorization 헤더
- **자동 로그아웃**: 토큰 만료 시 (백엔드 처리)

### 9.2 입력 검증
- **클라이언트 사이드**: 폼 검증
- **서버 사이드**: 백엔드 API 검증

## 10. 향후 개선 사항

- [ ] 장바구니 페이지 구현
- [ ] 주문 기능 구현
- [ ] 검색 기능 구현
- [ ] 필터링/정렬 기능
- [ ] 사용자 프로필 페이지
- [ ] 주문 내역 조회
- [ ] 리뷰/평점 기능
- [ ] 소셜 로그인 (네이버, 카카오, 구글)

## 11. 파일 구조

```
frontend/app/
├── admin/                    # 관리자 페이지
│   ├── page.tsx             # 관리자 메인
│   └── products/            # 상품 관리
│       ├── new/             # 상품 추가
│       └── [id]/edit/       # 상품 수정
├── components/              # 공통 컴포넌트
│   ├── Header.tsx          # 헤더
│   ├── Footer.tsx          # 푸터
│   └── ProductCard.tsx     # 상품 카드
├── lib/                     # 유틸리티
│   ├── api.ts              # API 함수
│   ├── auth.ts             # 인증 함수
│   ├── cart.ts             # 장바구니 함수
│   └── utils.ts            # 공통 유틸리티
├── login/                   # 로그인 페이지
├── signup/                  # 회원가입 페이지
├── product/                 # 상품 페이지
│   └── [id]/               # 상품 상세
├── types/                   # 타입 정의
│   └── index.ts
├── layout.tsx              # 루트 레이아웃
└── page.tsx                # 홈 페이지
```

## 12. 환경 변수

```env
NEXT_PUBLIC_API_URL=http://localhost:8080/api
```

## 13. 실행 방법

```bash
# 개발 서버 실행 (포트 3001)
npm run dev

# 프로덕션 빌드
npm run build

# 프로덕션 서버 실행
npm start
```

